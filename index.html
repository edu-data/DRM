<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DRM 설문 — 일상재구성법 기반 고교생 진로 진단</title>
  <meta name="description" content="일상재구성법(DRM)을 활용하여 고교생의 정보·시간·기회 접근성과 웰빙을 진단하는 연구 설문입니다." />
  <link rel="stylesheet" href="css/style.css" />
  <script src="js/config.js"></script>
</head>

<body>

  <div class="app-container">

    <!-- ===== HEADER ===== -->
    <header class="app-header">
      <span class="app-header__badge">Research Survey 2026</span>
      <h1 class="app-header__title">『나의 하루 돌아보기』</h1>
      <p class="app-header__subtitle">
        일상재구성법(DRM)을 활용한 설문조사
      </p>
    </header>

    <!-- ===== PROGRESS BAR ===== -->
    <nav class="progress-bar" id="progressBar">
      <div class="progress-step" data-step="1">
        <div class="progress-step__circle">1
          <span class="progress-step__label">일과 재구성</span>
        </div>
      </div>
      <div class="progress-step" data-step="1-2">
        <div class="progress-step__line"></div>
      </div>
      <div class="progress-step" data-step="2">
        <div class="progress-step__circle">2
          <span class="progress-step__label">심층 진단</span>
        </div>
      </div>
      <div class="progress-step" data-step="2-3">
        <div class="progress-step__line"></div>
      </div>
      <div class="progress-step" data-step="3">
        <div class="progress-step__circle">3
          <span class="progress-step__label">종합 제언</span>
        </div>
      </div>
    </nav>

    <!-- ============================================================
       INTRO: 설문 안내문
       ============================================================ -->
    <section class="part-section active" id="partIntro">

      <div class="intro-hero">
        <div class="intro-hero__icon">📖</div>
        <h2 class="intro-hero__title">『나의 하루 돌아보기』 조사지</h2>
        <p class="intro-hero__subtitle">일상재구성법(DRM) 기반 설문</p>
      </div>

      <div class="glass-card intro-card">
        <h3 class="intro-card__heading">👋 안녕하세요</h3>
        <p class="intro-card__text">
          『나의 하루 돌아보기』는 <strong>어제 하루</strong> 동안 있었던 일과 그 일을 하면서 느꼈던 기분에 대한 것입니다.
        </p>
        <p class="intro-card__text">
          여러분들이 학교를 포함한 <strong>가정, 학원, 취미 및 휴식시간</strong> 등 일상생활에서 했던 모든 일(활동)을 포함하여 작성하면 됩니다.
        </p>
      </div>

      <div class="glass-card intro-card">
        <h3 class="intro-card__heading">📋 조사 순서 안내</h3>
        <p class="intro-card__text" style="margin-bottom:0.5rem; color:var(--text-secondary); font-size:0.85rem;">
          다음 순서에 따라 하루를 돌아보고 기록해 주세요.
        </p>

        <div class="intro-step">
          <div class="intro-step__number">1</div>
          <div class="intro-step__content">
            <div class="intro-step__title">기분 좋았던 활동 작성</div>
            <p class="intro-step__desc">
              어제 하루 동안 가장 <strong>기분이 좋았던 일</strong> 혹은 <strong>만족스러웠던 일(활동)</strong> 5가지를 작성해 주세요.<br>
              <span class="intro-step__note">(최소 3가지 이상, 최대 5가지만 작성해 주세요)</span>
            </p>
            <div class="intro-examples">
              <span class="intro-examples__label">예시</span>
              <div class="intro-examples__items">
                <span class="intro-example-tag">잠을 푹 잠</span>
                <span class="intro-example-tag">반려동물과 산책함</span>
                <span class="intro-example-tag">좋아하는 책을 읽음</span>
                <span class="intro-example-tag">친구의 고민을 들어줌</span>
                <span class="intro-example-tag">숙제를 계획한 시간에 끝마침</span>
                <span class="intro-example-tag">수업시간에 칭찬받음</span>
                <span class="intro-example-tag">어려운 수학문제를 해결함</span>
                <span class="intro-example-tag">온라인 게임을 함</span>
              </div>
            </div>
          </div>
        </div>

        <div class="intro-step">
          <div class="intro-step__number">2</div>
          <div class="intro-step__content">
            <div class="intro-step__title">구체적인 활동 내용 기록</div>
            <p class="intro-step__desc">
              기록한 일(활동)이 어떤 일이었는지 조금 더 자세히 작성해 주세요.<br>
              어제 하루 중 <strong>언제</strong> 했던 일이고, <strong>어디서</strong> 했는지, <strong>누구와</strong> 했었는지 생각하여 적어 주세요.
            </p>
            <div class="intro-examples">
              <span class="intro-examples__label">예시</span>
              <div class="intro-examples__grid">
                <div class="intro-example-group">
                  <span class="intro-example-group__title">⏰ 언제</span>
                  <span class="intro-example-tag">학교 수업 시간</span>
                  <span class="intro-example-tag">점심시간</span>
                  <span class="intro-example-tag">학원 쉬는 시간</span>
                  <span class="intro-example-tag">학원 마치고 집에 가는 길</span>
                  <span class="intro-example-tag">잠자기 전</span>
                </div>
                <div class="intro-example-group">
                  <span class="intro-example-group__title">📍 어디서</span>
                  <span class="intro-example-tag">학교에서</span>
                  <span class="intro-example-tag">PC방에서</span>
                  <span class="intro-example-tag">버스정거장에서</span>
                  <span class="intro-example-tag">집에서</span>
                  <span class="intro-example-tag">온라인 가상현실에서</span>
                </div>
                <div class="intro-example-group">
                  <span class="intro-example-group__title">👥 누구와</span>
                  <span class="intro-example-tag">혼자서</span>
                  <span class="intro-example-tag">친구</span>
                  <span class="intro-example-tag">담임선생님</span>
                  <span class="intro-example-tag">동생</span>
                  <span class="intro-example-tag">이웃사람들</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="intro-step">
          <div class="intro-step__number">3</div>
          <div class="intro-step__content">
            <div class="intro-step__title">활동 동기 평가</div>
            <p class="intro-step__desc">
              그 일(활동)이 나에게 있어 왜 기분이 좋고, 만족스러웠는지 그 이유를 알려 주세요.<br>
              각 이유가 얼마나 해당하는지 <strong>1점(전혀 아니다) ~ 6점(매우 그렇다)</strong> 사이로 점수를 선택해 주세요.
            </p>
          </div>
        </div>
      </div>

      <div class="glass-card intro-card intro-card--privacy">
        <h3 class="intro-card__heading">🔒 개인정보 보호 안내</h3>
        <p class="intro-card__text">
          귀하께서 작성하신 기록은 <strong>철저하게 비밀이 보장</strong>되며, 무작위 번호를 부여하여 관리하므로 개인의 신원을 확인할 수 없습니다.
        </p>
      </div>

      <div class="nav-buttons" style="justify-content:center;">
        <button class="btn btn-primary btn-start-survey" id="startSurveyBtn" type="button">
          📝 설문 시작하기
        </button>
      </div>

    </section>

    <!-- ============================================================
       PART 1: 일과 재구성 (Diary Construction)
       ============================================================ -->
    <section class="part-section" id="part1">
      <h2 class="part-title">PART 1. 어제의 일과 재구성</h2>
      <p class="part-description">
        어제 하루를 기억나는 대로 <strong>10~15개의 에피소드</strong>로 나누어 주세요.<br />
        예: 등교, 1교시 수업, 점심시간, 방과 후 활동, 유튜브 시청 등
      </p>

      <div class="episode-count" id="episodeCount">
        <span>📝</span> <span id="episodeCountText">에피소드 0개</span>
      </div>

      <div id="episodeList">
        <!-- Episodes are dynamically added here -->
      </div>

      <button class="add-episode-btn" id="addEpisodeBtn" type="button">
        ＋ 에피소드 추가
      </button>

      <div class="nav-buttons">
        <div></div>
        <button class="btn btn-primary" id="toPart2Btn" type="button">
          다음: 심층 진단 →
        </button>
      </div>
    </section>

    <!-- ============================================================
       PART 2: 에피소드별 심층 진단
       ============================================================ -->
    <section class="part-section" id="part2">
      <h2 class="part-title">PART 2. 에피소드별 심층 진단</h2>
      <p class="part-description">
        위에서 기록한 에피소드 중 <strong>가장 기억에 남는 3~5개</strong>를 골라주세요.
      </p>

      <!-- Step 2a: Selection -->
      <div id="part2Selection">
        <p class="select-hint">✨ 3~5개의 에피소드를 선택해 주세요</p>
        <div class="episode-select-grid" id="episodeSelectGrid">
          <!-- Dynamically populated -->
        </div>
        <div id="selectedCountBadge" class="episode-count">
          <span>✅</span> <span id="selectedCountText">0개 선택됨</span>
        </div>
        <button class="btn btn-primary btn-block" id="startDiagnosisBtn" type="button">
          선택 완료 — 진단 시작
        </button>
      </div>

      <!-- Step 2b: Diagnosis Forms -->
      <div id="part2Diagnosis" style="display:none;">
        <div id="diagnosisForms">
          <!-- Dynamically populated -->
        </div>
      </div>

      <div class="nav-buttons">
        <button class="btn btn-secondary" id="backToPart1Btn" type="button">
          ← 이전
        </button>
        <button class="btn btn-primary" id="toPart3Btn" type="button">
          다음: 종합 진단 →
        </button>
      </div>
    </section>

    <!-- ============================================================
       PART 3: 종합 진단 및 제언
       ============================================================ -->
    <section class="part-section" id="part3">
      <h2 class="part-title">PART 3. 종합 진단 및 제언</h2>
      <p class="part-description">
        어제 하루를 종합적으로 돌아보며 나의 일상에 대해 성찰합니다.
      </p>

      <!-- Summary Dashboard -->
      <div class="summary-dashboard" id="summaryDashboard">
        <div class="summary-stat">
          <div class="summary-stat__value" id="statEpisodes">0</div>
          <div class="summary-stat__label">총 에피소드</div>
        </div>
        <div class="summary-stat">
          <div class="summary-stat__value" id="statDiagnosed">0</div>
          <div class="summary-stat__label">진단 에피소드</div>
        </div>
        <div class="summary-stat">
          <div class="summary-stat__value" id="statAvgWellbeing">-</div>
          <div class="summary-stat__label">평균 웰빙 점수</div>
        </div>
      </div>

      <!-- Q1: Biggest Barrier -->
      <div class="glass-card">
        <h3 style="font-size:1rem; font-weight:700; margin-bottom:0.8rem;">
          어제의 가장 큰 장벽
        </h3>
        <p style="font-size:0.85rem; color:var(--text-secondary); margin-bottom:1rem;">
          어제 하루 중 나의 성장을 가장 가로막았던 '결핍'은 무엇인가요?
        </p>
        <div class="barrier-options" id="barrierOptions">
          <label class="barrier-option" data-value="information">
            <input type="radio" name="barrier" value="information" />
            <div class="barrier-option__icon">📡</div>
            <div class="barrier-option__content">
              <div class="barrier-option__title">정보의 결핍</div>
              <div class="barrier-option__desc">무엇을 해야 할지 모르겠음</div>
            </div>
          </label>
          <label class="barrier-option" data-value="time">
            <input type="radio" name="barrier" value="time" />
            <div class="barrier-option__icon">⏳</div>
            <div class="barrier-option__content">
              <div class="barrier-option__title">시간의 결핍</div>
              <div class="barrier-option__desc">너무 바쁘거나, 의미 없이 버려지는 시간이 많음</div>
            </div>
          </label>
          <label class="barrier-option" data-value="opportunity">
            <input type="radio" name="barrier" value="opportunity" />
            <div class="barrier-option__icon">🚪</div>
            <div class="barrier-option__content">
              <div class="barrier-option__title">기회의 결핍</div>
              <div class="barrier-option__desc">내가 원하는 과목이나 활동을 할 수 없음</div>
            </div>
          </label>
        </div>
      </div>

      <!-- Q2: Message to School -->
      <div class="glass-card">
        <h3 style="font-size:1rem; font-weight:700; margin-bottom:0.5rem;">
          🏫 학교에 바라는 한 마디
        </h3>
        <p style="font-size:0.85rem; color:var(--text-secondary); margin-bottom:1rem;">
          "내가 만약 학교를 직접 설계할 수 있다면, 나의 일상을 위해 <strong>[이것]</strong>만은 꼭 바꾸고 싶다!"
        </p>
        <textarea class="form-textarea" id="schoolMessage" placeholder="자유롭게 적어 주세요..." rows="4"></textarea>
      </div>

      <!-- Navigation & Export -->
      <div class="nav-buttons">
        <button class="btn btn-secondary" id="backToPart2Btn" type="button">
          ← 이전
        </button>
        <button class="btn btn-primary" id="completeBtn" type="button">
          ✅ 설문 완료
        </button>
      </div>
    </section>

    <!-- ============================================================
       COMPLETION SCREEN
       ============================================================ -->
    <section class="part-section" id="completionScreen">
      <div class="completion-screen">
        <div class="completion-screen__icon">🎉</div>
        <h2 class="completion-screen__title">설문이 완료되었습니다!</h2>
        <p class="completion-screen__desc">
          소중한 응답에 감사드립니다.
        </p>
        <div id="submitStatus" class="submit-status">
          <div class="submit-status__spinner"></div>
          <span class="submit-status__text">응답을 제출하고 있습니다...</span>
        </div>
        <div class="export-buttons">
          <button class="btn btn-primary" id="exportJsonBtn" type="button">
            📄 JSON 다운로드
          </button>
          <button class="btn btn-secondary" id="exportCsvBtn" type="button">
            📊 CSV 다운로드
          </button>
        </div>
      </div>
    </section>

  </div><!-- /.app-container -->

  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <script src="js/app.js"></script>
</body>

</html>